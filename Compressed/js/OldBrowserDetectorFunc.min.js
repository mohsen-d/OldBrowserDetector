jQuery.OldBrowsersDetector=function(configs){var defaults={mode:"alert",title:"",message:"",links:"",container:"BrowserWarningMessage",showCloseButton:false,redirectToUrl:"",ieVersion:8,firefoxVersion:10,chromeVersion:10,operaVersion:9,safariVersion:4};var configs=$.extend(defaults,configs);CheckVersions();var userAgent=window.navigator.userAgent;var browserName=GetBrowserName(userAgent);if(browserName=="Others"){return}var browserVersion=GetBrowserVersion(userAgent,browserName);if(browserVersion=="notFound"||isNaN(browserVersion)){return}if(IsBrowserOld(browserName,browserVersion)){checkConfigs();if(configs.mode=="alert"){alert(configs.message)}else{if(configs.mode=="redirect"){window.location.href=configs.redirectToUrl}else{if(configs.mode=="message"){var closeBtn="";if(configs.showCloseButton){closeBtn="<a id='closeOldBrowserWarningMessage' class='close-button' href='#' > close </a>"}$("#"+configs.container).hide().html(closeBtn+"<div id='messageContent'>"+CreateContent()+"</div>").fadeIn(1000)}else{if(configs.mode=="modal"){var modalWindow="<div id='BrowserWarningModal'><div id='modalWin'>";if(configs.showCloseButton==true){modalWindow+="<a id='closeOldBrowserWarningModal' class='close-button' href='#' > close </a>"}modalWindow+="<div id='modalContent'>"+CreateContent()+"</div>";modalWindow+="</div>";modalWindow+="<div id='modalBg'></div></div>";$("body").append(modalWindow);setModalBgDimensions();centeralizeModalWindow();$("#modalBg").fadeTo("slow",0.5)}}}}if(configs.showCloseButton==true){var CloseBtnLink=$(".close-button");CloseBtnLink.click(function(){$(this).parent().fadeOut();if(configs.mode=="modal"){$("#modalBg").fadeOut()}return false})}}function GetBrowserName(userAgent){var browserName="Others";if(userAgent.indexOf("Firefox")!=-1){browserName="Firefox"}else{if(userAgent.indexOf("Opera")!=-1){browserName="Opera"}else{if(userAgent.indexOf("Chrome")!=-1){browserName="Chrome"}else{if(userAgent.indexOf("Safari")!=-1){browserName="Safari"}else{if(userAgent.indexOf("MSIE")!=-1){browserName="MSIE"}}}}}return browserName}function GetBrowserVersion(userAgent,browserName){var version="notFound";var extVerFromIndex=0;var extVerToIndex=0;if(browserName=="Firefox"){extVerFromIndex=userAgent.lastIndexOf("/")+1;version=userAgent.substring(extVerFromIndex)}else{if(browserName=="Opera"){if(userAgent.indexOf("Version")!=-1){extVerFromIndex=userAgent.lastIndexOf("/")+1;version=userAgent.substring(extVerFromIndex)}else{extVerFromIndex=userAgent.indexOf("Opera/")+7;version=userAgent.substring(extVerFromIndex)}}else{if(browserName=="Chrome"){extVerFromIndex=userAgent.lastIndexOf("Chrome")+7;version=userAgent.substring(extVerFromIndex);extVerToIndex=version.indexOf(".");version=version.substring(0,extVerToIndex)}else{if(browserName=="MSIE"){extVerFromIndex=userAgent.lastIndexOf("MSIE ")+5;extVerToIndex=extVerFromIndex+3;version=userAgent.substring(extVerFromIndex,extVerToIndex)}else{if(browserName=="Safari"){if(userAgent.indexOf("Version")!=-1){extVerFromIndex=userAgent.lastIndexOf("Version")+8;extVerToIndex=extVerFromIndex+3;version=userAgent.substring(extVerFromIndex,extVerToIndex)}else{extVerFromIndex=userAgent.indexOf("Safari")+7;extVerToIndex=extVerFromIndex+3;version=userAgent.substring(extVerFromIndex,extVerToIndex)}}}}}}var dotIndex=version.indexOf(".");if(dotIndex!=-1){version=version.substring(0,dotIndex)}return version}function IsBrowserOld(browserName,browserVersion){var isOld=false;browserVersion=parseFloat(browserVersion);if(browserName=="Firefox"){if(browserVersion<=configs.firefoxVersion){isOld=true}}else{if(browserName=="Opera"){if(browserVersion<=configs.operaVersion){isOld=true}}else{if(browserName=="Chrome"){if(browserVersion<=configs.chromeVersion){isOld=true}}}}if(browserName=="MSIE"){if(browserVersion<=configs.ieVersion){isOld=true}}if(browserName=="Safari"){if(browserVersion<=configs.safariVersion){isOld=true}}return isOld}function setModalBgDimensions(){var screenHeight=$(document).height();var screenWidth=$(window).width();$("#modalBg").css({width:screenWidth,height:screenHeight})}function centeralizeModalWindow(){var windowHeight=$(window).height();var windowWidth=$(window).width();$("#modalWin").css({top:windowHeight/2-$("#modalWin").height()/2});$("#modalWin").css({left:(windowWidth/2)-($("#modalWin").width()/2)})}function checkConfigs(){var modes=["alert","message","modal","redirect"];if($.inArray(configs.mode,modes)==-1){configs.mode="alert"}if($.trim(configs.title)==""){configs.title="هشدار"}if($.trim(configs.message)==""){if(configs.mode=="modal"){configs.message=ModalDefaultMessage()}else{if(configs.mode=="message"){configs.message=MessageDefaultMessage()}else{if(configs.mode=="alert"){configs.message="مرورگر شما قدیمی و غیر ایمن است . لطفا آن را بروز کنید"}}}}if($.trim(configs.links)==""){configs.links=DefaultLinks()}if(configs.mode=="message"&&$.trim(configs.container)==""){configs.container="BrowserWarningMessage"}if(configs.mode=="message"&&$("#"+configs.container).length==0){$("body").prepend("<div id='"+configs.container+"'></div>")}if(typeof configs.showCloseButton!="boolean"){configs.showCloseButton=true}if(configs.mode=="redirect"&&$.trim(configs.redirectToUrl)==""){configs.mode="alert"}}function CheckVersions(){if(isNaN(parseFloat(configs.ieVersion))){configs.ieVersion=8}if(isNaN(parseFloat(configs.firefoxVersion))){configs.firefoxVersion=10}if(isNaN(parseFloat(configs.operaVersion))){configs.operaVersion=9}if(isNaN(parseFloat(configs.chromeVersion))){configs.chromeVersion=10}if(isNaN(parseFloat(configs.safariVersion))){configs.safariVersion=4}}function ModalDefaultMessage(){var content="برای اینکه بتوانید تجربه بهتری در اینترنت داشته باشید و از امکانات مدرن وب سایتها استفاده کنید پیشنهاد میکنیم یکی از مرورگرهایی که در لیست زیر آمده است را دانلود کنید. متاسفانه این وب سایت با مرورگر شما سازگاری ندارد.";content+="کافی است بر روی آیکانهای آنها کلیک کنید تا به وب سایت مربوطه منتقل شوید.";return content}function MessageDefaultMessage(){var content=" متاسفانه این وب سایت با مرورگر شما سازگاری ندارد. برای اینکه از امکانات مدرن وب سایتها استفاده کنید یکی از مرورگرهایی که در لیست روبرو آمده است را دانلود کنید..";content+="کافی است بر روی آیکانهای آنها کلیک کنید تا به وب سایت مربوطه منتقل شوید.";return content}function DefaultLinks(){var links="<ul class='browser-options'>";links+="<li class='firefox'><a href='http://mozilla.com/firefox/'></a></li>";links+="<li class='chrome'><a href='http://google.com/chrome'></a></li>";links+="<li class='opera'><a href='http://opera.com'></a></li>";links+="<li class='ie'><a href='http://microsoft.com/ie'></a></li>";links+="<li class='safari'><a href='http://apple.com/safari'></a></li>";links+="</ul>";return links}function CreateContent(){var content="<h2>"+configs.title+"</h2>";content+="<div class='message'>"+configs.message+"</div>";content+="<div class='links'>"+configs.links+"</div>";return content}};